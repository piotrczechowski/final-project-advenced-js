var v=Object.defineProperty;var w=(t,e,a)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var f=(t,e,a)=>w(t,typeof e!="symbol"?e+"":e,a);import"../burger-Bqzyy2jP.js";const n=class n{static handleErrors(e){return async()=>{try{return await e()}catch(a){console.error("Error during request: ",a.message)}}}static async fetchJson(e,a){return(await fetch(e,a)).json()}async getQuotes(){return await n.handleErrors(async()=>await n.fetchJson(`${n.BASE_URL}/quote`))()}async getByFilterName(e){return await n.handleErrors(async()=>{const r=new URLSearchParams({...e});return await n.fetchJson(`${n.BASE_URL}/filters?${r}`)})()}async getByFilterCategory(e){return await n.handleErrors(async()=>{const r=new URLSearchParams({...e});return await n.fetchJson(`${n.BASE_URL}/exercises?${r}`)})()}async getOneExercises(e){return await n.handleErrors(async()=>await n.fetchJson(`${n.BASE_URL}/exercises/${e}`))()}async addExercisesRate(e,a){return await n.handleErrors(async()=>{const s={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};return await n.fetchJson(`${n.BASE_URL}/exercises/${e}/rating`,s)})()}async addSubscription(e){return await n.handleErrors(async()=>{const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return await n.fetchJson(`${n.BASE_URL}/subscription`,r)})()}};f(n,"BASE_URL","https://your-energy.b.goit.study/api");let d=n;const o=new d,S=document.querySelector(".pagination-numbers"),E=document.querySelector(".muscles-list");let l=1,b;try{S.addEventListener("click",t=>{t.target.nodeName==="BUTTON"&&L(t)})}catch(t){console.error("Error initializing pagination:",t)}async function L(t){const e=Number(t.target.textContent);if(e===l)return;const a={...b,page:e};try{if(loader.open(),a.filter){const r=await o.getByFilterName(a);E.innerHTML=filterBtn.makeMarkupMuscles(r.results)}else{const r=await o.getByFilterCategory(a);makeMarkupCards(r)}loader.close(),l=e,M()}catch(r){console.error("Error fetching data:",r),loader.close()}}function M(){document.querySelectorAll(".pagination-number").forEach(t=>{const e=Number(t.getAttribute("page-index"));t.classList.toggle("active",e===l)})}const g="/final-project-advenced-js/assets/sprite-Da3IUN7k.svg",R=document.querySelector(".filter-list-js");let p="";const q=["BUTTON","svg","use","P"];let m,h,y;async function B(t){t.preventDefault();const e=document.querySelector(".modal-get-raiting").dataset.id,r=document.querySelector(".rating-container-js").dataset.rating,s=document.querySelector(".raiting-form-field-input").value,i=document.querySelector(".raiting-form-field-comment").value,u={rate:Number(r),email:s,review:i};loader.open();const c=await o.addExercisesRate(e,u);loader.close(),c.message?message.error(`${c.message}`):(message.success(`Thank you for your mark - ${u.rate} for ${c.name}`),myModal.close())}async function x(){const t=document.querySelector(".modal-info").dataset.id;myModal.close(),myModal.open(getRatingModal(t)),createInteractiveRaiting(),y=document.querySelector(".raiting-form"),y.addEventListener("submit",B)}async function N(){const t=document.querySelector(".refresh-button-js"),e=document.querySelector(".modal-info").dataset.id,r=window.location.href.endsWith("favorites.html");if(t.dataset.favorite==="false"){t.innerHTML=`
      <button class="add-favorite-js" type="button">
        <span class="remote-favorites">Remove from favorites</span>
        <svg class="trash-icon-img" width="18" height="18" aria-label="trash-icon">
          <use href="${g}#icon-trash"></use>
        </svg>
      </button>`,t.dataset.favorite="true",loader.open();const s=await o.getOneExercises(e);loader.close(),addLocalFavorites(s),r&&addContent()}else t.innerHTML=`
      <button class="add-favorite-js" type="button">
        <span>Add to favorites</span>
        <svg class="heart-icon-img" width="20" height="20" aria-label="heart-icon">
          <use href="${g}#icon-heart"></use>
        </svg>
      </button>`,t.dataset.favorite="false",deleteLocalFavorites(e),r&&addContent()}function U({target:t}){const{nodeName:e,classList:a,dataset:r}=t;if(q.includes(e)&&!a.contains("favourites_btn_trash_icon")&&!a.contains("favourites_btn_workout"))return p=r.id,$(p);if(a.contains("favourites_btn_trash_icon")){const s=r.id;deleteLocalFavorites(s),addContent()}}const $=async t=>{loader.open();const e=await o.getOneExercises(t);loader.close();const a=localStorage.getItem("favorites");if(a){const s=JSON.parse(a).some(({_id:i})=>i===t);e.favorite=s}else e.favorite=!1;myModal.open(getExerciseModal(e)),h=document.querySelector(".refresh-button-js"),m=document.querySelector(".add-rating"),m.addEventListener("click",x),h.addEventListener("click",N)};R.addEventListener("click",U);
